<%- include("../partials/header") %> <%- include('../partials/topNav') %><%-
include("../partials/navbar") %> <%- include ('../partials/messages') %>

<section class="text-gray-600">
  <div class="container px-5 py-5 mx-auto">
    <div class="flex flex-wrap w-full mb-8">
      <div class="w-full mb-6 lg:mb-0">
        <h1
          class="sm:text-4xl text-5xl font-medium title-font mb-2 text-gray-900"
        >
          Book Lab Test
        </h1>
        <div class="h-1 w-20 bg-indigo-500 rounded"></div>
      </div>
    </div>

    <form action="/labtest" method="post">
      <div
        x-data
        x-init="flatpickr($refs.datetimewidget, {wrap: true, enableTime: true, dateFormat: 'M j, Y h:i K'});"
        x-ref="datetimewidget"
        class="flatpickr container mx-auto col-span-6 sm:col-span-6 mt-5"
      >
        <label
          for="datetime"
          class="flex-grow block font-medium text-sm text-gray-700 mb-1"
          >Select Lab Test Type:</label
        >

        <div class="relative inline-flex mb-5">
          <svg
            class="w-2 h-2 absolute top-0 right-0 m-4 pointer-events-none"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 412 232"
          >
            <path
              d="M206 171.144L42.678 7.822c-9.763-9.763-25.592-9.763-35.355 0-9.763 9.764-9.763 25.592 0 35.355l181 181c4.88 4.882 11.279 7.323 17.677 7.323s12.796-2.441 17.678-7.322l181-181c9.763-9.764 9.763-25.592 0-35.355-9.763-9.763-25.592-9.763-35.355 0L206 171.144z"
              fill="#648299"
              fill-rule="nonzero"
            />
          </svg>
          <select
            class="border border-gray-300 rounded-full text-gray-600 h-10 pl-5 pr-10 bg-white hover:border-gray-400 focus:outline-none appearance-none"
            name="labtest_type"
          >
            <option name="" value="0" selected>Select Lab Test</option>
            <option name="blood" value="blood">Blood</option>
            <option name="urine" value="urine">Urine</option>
            <option name="stool" value="stool">Stool</option>
          </select>
        </div>

        <label
          for="datetime"
          class="flex-grow block font-medium text-sm text-gray-700 mb-1"
          >Date and Time</label
        >
        <div class="flex align-middle align-content-center">
          <input
            x-ref="datetime"
            type="text"
            id="datetime"
            name="datetime"
            data-input
            placeholder="Select.."
            required
            class="block w-full px-2 border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-l-md shadow-sm"
          />

          <a
            class="h-11 w-10 input-button cursor-pointer rounded-r-md bg-transparent border-gray-300 border-t border-b border-r"
            title="clear"
            data-clear
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-7 w-7 mt-2 ml-1"
              viewBox="0 0 20 20"
              fill="#c53030"
            >
              <path
                fill-rule="evenodd"
                d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                clip-rule="evenodd"
              />
            </svg>
          </a>
          <button
            type="submit"
            class="ml-2 text-white bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 hover:bg-gradient-to-br focus:ring-4 focus:ring-blue-300 dark:focus:ring-blue-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2"
          >
            Submit
          </button>
        </div>
      </div>
    </form>

    <!-- component -->
    <div class="overflow-x-auto">
      <div
        class="bg-gray-100 flex items-center justify-center bg-gray-100 font-sans overflow-hidden"
      >
        <div class="w-full lg:w-5/6">
          <div class="bg-white shadow-md rounded my-6">
            <table class="min-w-max w-full table-auto">
              <thead>
                <tr
                  class="bg-gray-200 text-gray-600 uppercase text-sm leading-normal"
                >
                  <th class="py-3 px-6 text-center">Test Id</th>
                  <th class="py-3 px-6 text-center">Test Type</th>
                  <th class="py-3 px-6 text-center">Test Date</th>
                  <th class="py-3 px-6 text-center">Status</th>
                  <th class="py-3 px-6 text-center">Result</th>
                </tr>
              </thead>
              <tbody class="text-gray-600 text-sm font-light">
                <%if (test_list){ %> <% test_list.forEach(function(eachtest){ %>
                <tr class="border-b border-gray-200 hover:bg-gray-100">
                  <td class="py-3 px-6 text-center">
                    <div class="flex items-center justify-center">
                      <%= eachtest.test_id %>
                    </div>
                  </td>
                  <td class="py-3 px-6 text-center">
                    <%= eachtest.labtest_type %>
                  </td>
                  <td class="py-3 px-6 text-center">
                    <div class="flex item-center justify-center">
                      <%= eachtest.duration %>
                    </div>
                  </td>
                  <td class="py-3 px-6 text-center">
                    <div class="flex item-center justify-center">
                      <%= eachtest.status %>
                    </div>
                  </td>
                  <td class="py-3 px-6 text-center">
                    <div class="flex item-center justify-center">
                      <%= eachtest.result %>
                    </div>
                  </td>
                </tr>
                <% }); %> <% } %>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script src="https://cdnjs.cloudflare.com/ajax/libs/flatpickr/4.6.9/flatpickr.min.js"></script>
<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/flatpickr/4.6.9/themes/airbnb.min.css"
/>
<script
  src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine.js"
  defer
></script>
<%- include("../partials/footNav") %> <%- include("../partials/footer") %>
